{"version":3,"sources":["assets/Scripts/Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PlatformSpawner extends cc.Component {\n    @property(cc.Prefab)\n    platformPrefab: cc.Prefab = null;\n    @property(cc.Prefab)\n    specialPlatformPrefab: cc.Prefab = null; \n    @property(cc.Node)\n    background: cc.Node = null;\n    @property(cc.Node)\n    player: cc.Node = null;\n    @property(cc.Label)\n    scoreLabel: cc.Label = null;\n    playerScore: number = 0;\n    private lastPlatformX: number = 0;\n\n    onLoad() {\n        this.lastPlatformX = this.background.x;\n        this.spawnInitialPlatform();\n        this.schedule(this.spawnSpecialPlatform, 4);\n        cc.director.getCollisionManager().enabled = true;\n    }\n\n    gainScore() {\n        this.playerScore += 1;\n        this.scoreLabel.string = this.playerScore.toString();\n    }\n\n    gainSpec() {\n        this.playerScore += 2;\n        this.scoreLabel.string = this.playerScore.toString();\n    }\n    spawnInitialPlatform() {\n        this.spawnPlatform();\n    }\n\n    spawnPlatform() {\n        const newPlatform = cc.instantiate(this.platformPrefab);\n        this.node.addChild(newPlatform);\n        newPlatform.setPosition(this.getNewPlatformPosition());\n    }\n\n    getNewPlatformPosition() {\n        const minX = this.lastPlatformX + 200;\n        const maxX = this.lastPlatformX + 400;\n        const randX = Math.random() * (maxX - minX) + minX;\n        this.lastPlatformX = randX;\n        const randY = 0;\n        \n        return cc.v2(randX, randY);\n    }\n    spawnSpecialPlatform() {\n        const newSpecialPlatform = cc.instantiate(this.specialPlatformPrefab);\n        this.node.addChild(newSpecialPlatform);\n        const specialX = Math.random() < 0.5 ? 460 : 650;\n        const specialY = 0;\n        newSpecialPlatform.setPosition(cc.v2(specialX, specialY));\n    }\n    onCollisionEnter(selfCollider, otherCollider) {\n        if (otherCollider.name === 'Platform<BoxCollider>') {\n            this.gainScore();\n            cc.delayTime(3);\n            otherCollider.node.destroy();\n        }\n        else\n        {\n            this.gainSpec();\n            cc.delayTime(3);\n            otherCollider.node.destroy();\n        }\n    }\n    start() {\n        \n        }\n}\n\n\n\n\n\n\n\n"]}