{"version":3,"sources":["assets/Scripts/Stick.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n@ccclass\nexport class StickGame extends cc.Component {\n\n    @property(cc.AudioSource)\n    stickSFX: cc.AudioSource = null;\n\n    @property(cc.SpriteFrame)\n    stickSpriteFrame: cc.SpriteFrame = null;\n\n    @property(cc.Node)\n    player: cc.Node = null;\n\n    private stickNode: cc.Node = null;\n    private totalStickHeight: number = 0;\n    private originalStickHeight: number = 0; \n\n    onLoad() {\n        this.stickNode = new cc.Node();\n        const stickSprite = this.stickNode.addComponent(cc.Sprite);\n        stickSprite.spriteFrame = this.stickSpriteFrame;\n\n        this.stickNode.anchorY = 0;\n        this.stickNode.width = 10;\n        this.stickNode.height = 0;\n        this.originalStickHeight = this.stickNode.height;\n        this.node.addChild(this.stickNode);\n        this.totalStickHeight = this.stickNode.height;\n        const canvas = cc.find('Canvas');\n        if (canvas) {\n            canvas.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n            canvas.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        }\n    }\n\n    onTouchStart(event: cc.Touch) {\n        this.schedule(this.growStick, 0.000000001); // Grow\n    }\n\n    onTouchEnd(event: cc.Touch) {\n        this.unschedule(this.growStick);\n        this.fallStick();\n    }\n\n    growStick() {\n        this.totalStickHeight += 30;\n        this.stickNode.height = this.totalStickHeight;\n    }\n    resetStick() {\n        this.stickNode.destroy();\n        this.stickNode = new cc.Node();\n        this.onLoad();\n    }\n    fallStick() {\n        const rotateAction = cc.rotateTo(0.5, 90).easing(cc.easeCubicActionOut()); // Rotate\n        this.stickSFX.play();\n        const moveAction = cc.sequence(\n            rotateAction,\n            cc.callFunc(() => {\n                if (this.player) {\n                    const playerComponent = this.player.getComponent('Player');\n                    if (playerComponent) {\n                        playerComponent.walkOnStick(this.stickNode, this.totalStickHeight);\n                    }\n                }\n            }),\n            cc.delayTime(1.2),\n            cc.callFunc(() => {\n                this.resetStick();\n            })\n        );\n        this.stickNode.runAction(moveAction);\n    }\n}\n\n\n\n"]}