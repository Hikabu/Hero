{"version":3,"sources":["assets/Scripts/Stick.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class StickGame extends cc.Component {\n    @property(cc.SpriteFrame)\n    blockSpriteFrame: cc.SpriteFrame = null;\n\n    @property(cc.Node)\n    player: cc.Node = null;\n\n    private stickNode: cc.Node = null;\n\n    onLoad() {\n        cc.log('StickGame onLoaded');\n        this.stickNode = new cc.Node();\n        const stickSprite = this.stickNode.addComponent(cc.Sprite);\n        stickSprite.spriteFrame = this.blockSpriteFrame;\n        this.stickNode.anchorY = 0; // Anchor at the bottom\n        this.stickNode.width = 10; // Set a fixed width to avoid distortion\n        this.node.addChild(this.stickNode);\n\n        // Attach touch event listeners to the canvas\n        const canvas = cc.find('Canvas');\n        if (canvas) {\n            canvas.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n            canvas.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        }\n    }\n\n    onTouchStart(event: cc.Touch) {\n        cc.log('StickGame onTouchStart');\n        this.schedule(this.growStick, 0.1);\n    }\n\n    onTouchEnd(event: cc.Touch) {\n        cc.log('StickGame onTouchEnd');\n        this.unschedule(this.growStick);\n        this.fallStick();\n    }\n\n    growStick() {\n        const stickHeight = this.stickNode.height + 100; // Increase stick height by 10 pixels\n        this.stickNode.height = stickHeight;\n    }\n\n    fallStick() {\n        cc.log('Stick falling');\n        const rotateAction = cc.rotateTo(0.5, 90).easing(cc.easeCubicActionOut()); // Rotate 90 degrees in 0.5 seconds\n        const moveAction = cc.sequence(\n            rotateAction,\n            cc.callFunc(() => {\n                if (this.player) {\n                    const playerComponent = this.player.getComponent('Player');\n                    if (playerComponent) {\n                        playerComponent.move(this.stickNode.height);\n                    }\n                }\n            })\n        );\n        this.stickNode.runAction(moveAction);\n    }\n}\n\n\n\n// const { ccclass, property } = cc._decorator;\n\n// @ccclass('Stick')\n// export class Stick extends cc.Component {\n//     @property(cc.SpriteFrame)\n//     blockSpriteFrame: cc.SpriteFrame = null;\n\n//     private stickNode: cc.Node = null;\n\n//     onLoad() {\n//         cc.log('Stick onLoaded');\n//         this.stickNode = new cc.Node();\n//         this.stickNode.addComponent(cc.Sprite);\n//         this.stickNode.getComponent(cc.Sprite).spriteFrame = this.blockSpriteFrame;\n//         this.stickNode.anchorY = 0; // Anchor at the bottom\n//         this.node.addChild(this.stickNode);\n\n//         // T listeners\n//         const canvas = cc.find('Canvas');\n//         if (canvas) {\n//             canvas.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n//             canvas.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n//         }\n//     }\n\n//     onTouchStart(event: cc.Touch) {\n//         cc.log('Stick onTouchStart');\n//         this.schedule(this.growStick, 0.1);\n//     }\n\n//     onTouchEnd(event: cc.Touch) {\n//         cc.log('Stick onTouchEnd');\n//         this.unschedule(this.growStick);\n//         this.fallStick();\n//     }\n\n//     growStick() {\n//         const stickHeight = this.stickNode.height + 100; // Increase\n//         this.stickNode.height = stickHeight;\n//     }\n\n//     fallStick() {\n//         cc.log('Stick falling');\n//         const rotateAction = cc.rotateTo(0.5, 90).easing(cc.easeCubicActionOut()); // Rotate\n//         this.stickNode.runAction(rotateAction);\n//     }\n// }\n\n\n\n\n// const { ccclass, property } = cc._decorator;\n\n// @ccclass('Stick')\n// export class Stick extends cc.Component {\n//     @property(cc.SpriteFrame)\n//     blockSpriteFrame: cc.SpriteFrame = null;\n\n//     private stickNode: cc.Node = null;\n\n//     onLoad() {\n//         cc.log('Stick onLoaded');\n//         this.stickNode = new cc.Node();\n//         this.stickNode.addComponent(cc.Sprite);\n//         this.stickNode.getComponent(cc.Sprite).spriteFrame = this.blockSpriteFrame;\n//         this.stickNode.anchorY = 0; // Anchor at the bottom\n//         this.node.addChild(this.stickNode);\n\n//         // Attach touch event listeners to the canvas\n//         const canvas = cc.find('Canvas');\n//         if (canvas) {\n//             canvas.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n//             canvas.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n//         }\n//     }\n\n//     onTouchStart(event: cc.Touch) {\n//         cc.log('Stick onTouchStart');\n//         this.schedule(this.growStick, 0.1);\n//     }\n\n//     onTouchEnd(event: cc.Touch) {\n//         cc.log('Stick onTouchEnd');\n//         this.unschedule(this.growStick);\n//     }\n\n//     growStick() {\n//         const stickHeight = this.stickNode.height + 100; // Increase stick height by 10 pixels\n//         this.stickNode.height = stickHeight;\n//     }\n// }\n\n\n\n\n\n"]}